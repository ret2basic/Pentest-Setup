#!/bin/bash

#---------------------------#
# - Run this script as root #
# - Do NOT apt upgrade!     #
#---------------------------#

dpkg --add-architecture i386
apt update

apt -y install pure-ftpd
apt -y install powercat
apt -y install masscan
apt -y install exploitdb
apt -y install mingw-w64
apt -y install atftp
apt -y install shellter
apt -y install wine
apt -y install wine32
apt -y install crowbar
apt -y install rinetd
apt -y install httptunnel
apt -y install metasploit-framework
apt -y install seclists
apt -y install default-libmysqlclient-dev
apt -y install rlwrap
apt -y install gobuster
apt -y install sshuttle
apt -y install kerberoast
apt -y install bloodhound
pip3 install updog

#--------AutoRecon--------#

apt -y install seclists curl enum4linux feroxbuster gobuster impacket-scripts nbtscan nikto nmap onesixtyone oscanner redis-tools smbclient smbmap snmp sslscan sipvicious tnscmd10g whatweb wkhtmltopdf
python3 -m pip install git+https://github.com/Tib3rius/AutoRecon.git

#--------/usr/share/linux-resources: Linux privesc tools--------#

rm -rf /usr/share/linux-resources
mkdir /usr/share/linux-resources

# LinPEAS
wget https://github.com/carlospolop/PEASS-ng/releases/download/20220529/linpeas.sh -O /usr/share/linux-resources/linpeas.sh
chmod +x /usr/share/linux-resources/linpeas.sh
# pspy
wget https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy32 -O /usr/share/linux-resources/pspy32
chmod +x /usr/share/linux-resources/pspy32
wget https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy64 -O /usr/share/linux-resources/pspy64
chmod +x /usr/share/linux-resources/pspy64

#--------/usr/share/windows-resources: Windows privesc and AD tools--------#

# Kerberoast
# Do NOT apt install kerberoast
# Git clone the latest version:
cd /usr/share/windows-resources
git clone https://github.com/nidem/kerberoast.git
cd

# Mimikatz
# Do NOT use the latest version. Download from here:
# https://gitlab.com/kalilinux/packages/mimikatz/-/tree/d72fc2cca1df23f60f81bc141095f65a131fd099

rm /usr/share/windows-resources/mimikatz/Win32/mimikatz.exe
rm /usr/share/windows-resources/mimikatz/x64/mimikatz.exe
wget https://gitlab.com/kalilinux/packages/mimikatz/-/raw/d72fc2cca1df23f60f81bc141095f65a131fd099/Win32/mimikatz.exe -O /usr/share/windows-resources/mimikatz/Win32/mimikatz.exe
wget https://gitlab.com/kalilinux/packages/mimikatz/-/raw/d72fc2cca1df23f60f81bc141095f65a131fd099/x64/mimikatz.exe -O /usr/share/windows-resources/mimikatz/x64/mimikatz.exe

echo "Setup completed! Enjoy!"
