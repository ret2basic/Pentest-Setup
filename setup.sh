#!/bin/bash

#---------------------------#
# - Run this script as root #
# - Do NOT apt upgrade!     #
#---------------------------#

apt update
apt -y install terminator
wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/sublimehq-archive.gpg
echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list
apt update
apt -y install sublime-text
apt -y install nautilus

apt -y install pure-ftpd
apt -y install powercat
apt -y install masscan
apt -y install exploitdb
apt -y install mingw-w64
apt -y install atftp
apt -y install shellter
apt -y install wine
dpkg --add-architecture i386 ; apt update ; apt -y install wine32
apt -y install crowbar
apt -y install rinetd
apt -y install httptunnel
apt -y install metasploit-framework
apt -y install seclists
apt -y install default-libmysqlclient-dev
apt -y install rlwrap
apt -y install gobuster
apt -y install sshuttle
apt -y install kerberoast
apt -y install bloodhound

apt -y install smtp-user-enum
pip3 install updog

#--------Webshell / Reverse Shell--------#

# wso
wget https://raw.githubusercontent.com/tennc/webshell/master/php/wso/wso-4.2.5.php -O /usr/share/webshells/php/wso-4.2.5.php

# windows reverse shell
wget https://raw.githubusercontent.com/Dhayalanb/windows-php-reverse-shell/master/Reverse%20Shell.php -O /usr/share/webshells/php/windows-php-reverse-shell.php

#--------AutoRecon--------#

apt -y install seclists curl enum4linux feroxbuster gobuster impacket-scripts nbtscan nikto nmap onesixtyone oscanner redis-tools smbclient smbmap snmp sslscan sipvicious tnscmd10g whatweb wkhtmltopdf
python3 -m pip install git+https://github.com/Tib3rius/AutoRecon.git

#--------nmapAutomator--------#

wget https://raw.chmod +x /usr/local/bin/nmapAutomatorgithubusercontent.com/21y4d/nmapAutomator/master/nmapAutomator.sh -O /usr/local/bin/nmapAutomator
chmod +x /usr/local/bin/nmapAutomator

#--------/usr/share/linux-resources: Linux privesc tools--------#

rm -rf /usr/share/linux-resources
mkdir /usr/share/linux-resources

# linPEAS
rm -rf /usr/share/linux-resources/linPEAS
mkdir /usr/share/linux-resources/linPEAS
wget https://github.com/carlospolop/PEASS-ng/releases/download/20220529/linpeas.sh -O /usr/share/linux-resources/linPEAS/linpeas.sh
chmod +x /usr/share/linux-resources/linPEAS/linpeas.sh

# pspy
mkdir /usr/share/linux-resources/pspy
wget https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy32 -O /usr/share/linux-resources/pspy/pspy32
chmod +x /usr/share/linux-resources/pspy/pspy32
wget https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy64 -O /usr/share/linux-resources/pspy/pspy64
chmod +x /usr/share/linux-resources/pspy/pspy64

# Static binary
mkdir /usr/share/linux-resources/binaries/
wget https://github.com/andrew-d/static-binaries/raw/master/binaries/linux/x86_64/nmap -O /usr/share/linux-resources/binaries/nmap
chmod +x /usr/share/linux-resources/binaries/nmap
wget https://github.com/yunchih/static-binaries/raw/master/nc -O /usr/share/linux-resources/binaries/nc
chmod +x /usr/share/linux-resources/binaries/nc

# PwnKit
cd /usr/share/linux-resources/
git clone https://github.com/berdav/CVE-2021-4034.git
cd

#--------/usr/share/windows-resources: Windows privesc and AD tools--------#

cd /usr/share/windows-resources

# WinPEAS
rm -rf winpeas
mkdir winpeas
wget https://github.com/carlospolop/PEASS-ng/releases/download/20220619/winPEASx64.exe -O /usr/share/windows-resources/winpeas/winPEASx64.exe
wget https://github.com/carlospolop/PEASS-ng/releases/download/20220619/winPEASx86.exe -O /usr/share/windows-resources/winpeas/winPEASx86.exe

# Lovely Potato
git clone https://github.com/TsukiCTF/Lovely-Potato.git

# Kerberoast
# Do NOT apt install kerberoast
# Git clone the latest version:
git clone https://github.com/nidem/kerberoast.git

# Windows kernel exploits
git clone https://github.com/SecWiki/windows-kernel-exploits.git

# SharpHound
rm -rf /usr/share/windows-resources/sharphound
mkdir /usr/share/windows-resources/sharphound
wget https://github.com/BloodHoundAD/BloodHound/raw/master/Collectors/SharpHound.exe -O /usr/share/windows-resources/sharphound/SharpHound.exe

# Rubeus
rm -rf /usr/share/windows-resources/Rubeus
mkdir /usr/share/windows-resources/Rubeus
wget https://github.com/r3motecontrol/Ghostpack-CompiledBinaries/raw/master/Rubeus.exe -O /usr/share/windows-resources/Rubeus/Rubeus.exe

# Mimikatz
# Do NOT use the latest version. Download from here:
# https://gitlab.com/kalilinux/packages/mimikatz/-/tree/d72fc2cca1df23f60f81bc141095f65a131fd099
rm /usr/share/windows-resources/mimikatz/Win32/mimikatz.exe
rm /usr/share/windows-resources/mimikatz/x64/mimikatz.exe
wget https://gitlab.com/kalilinux/packages/mimikatz/-/raw/d72fc2cca1df23f60f81bc141095f65a131fd099/Win32/mimikatz.exe -O /usr/share/windows-resources/mimikatz/Win32/mimikatz.exe
wget https://gitlab.com/kalilinux/packages/mimikatz/-/raw/d72fc2cca1df23f60f81bc141095f65a131fd099/x64/mimikatz.exe -O /usr/share/windows-resources/mimikatz/x64/mimikatz.exe

# windapsearch
cd /usr/local/bin/
wget https://github.com/ropnop/go-windapsearch/releases/download/v0.3.0/windapsearch-linux-amd64 -O windapsearch
chmod +x windapsearch

cd

#--------Done--------#

echo "Setup completed! Enjoy!"
